<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
			name="viewport">
			
			
		<style>
		body {
				
				background-image: url('bg.jpg');
				background-size:100%;
				background-attachment:fixed;
				
				
			}
			.mediaplay{
				
				backdrop-filter : blur(5px);
				height=100%;
				float:left;
				flex-shrink:0;
				width: 40%;
				border-radius: 20px; /* 设置圆角半径 */
				padding: 15px;
				box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); /* 阴影 */
			}
			.song_lrc114514{
				
				float:right;
				backdrop-filter : blur(5px);
				flex-shrink:0;
				width: 50%;
				border-radius: 20px; /* 设置圆角半径 */
				padding: 15px;
				box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); /* 阴影 */
			}
			.main{
				
				
			}
		</style>
		
		
	</head>
	<body>
		<div class="main">
		<div class="mediaplay">
		<a href="index.html">返回</a>
		<p></p>
		<img id="album_img" src="" width="200px" height="200px">
		<p></p>
		
		<script type="text/javascript">
			function GetQueryString(name)
			{
     			var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
     			var r = window.location.search.substr(1).match(reg);
     			if(r!=null)return  decodeURI(r[2]); return null;
			}
			var song = GetQueryString("song");
			
			/* var txtttt = "<h5>现在播放：" + song+"</h5>"
			document.write(txtttt) */
			var dnm = '\" type=\"audio/mpeg\"'
			var wdnmd = 'control=\"controls\"'
			console.log(dnm)
			var songplayer = '<audio controls="" id="mp"><source src="https://jzsw-1304292379.cos.ap-beijing.myqcloud.com/music/' +song+ '.mp3'+ dnm +' ' + wdnmd+ '></audio>'
			console.log(songplayer)
			document.write(songplayer)
			
			var audio = document.getElementById("mp");
				
			var titlesonegname = "<title>"+ song + "</title>"
			document.write(titlesonegname)
			
			
			try{
				var OSB_split = song.split('[')
				var song_name = OSB_split[0]
				
				var OSB_split2 = OSB_split[1].split(']')
				var OSB_split3 = OSB_split2[0].split('.')
				var musician = OSB_split3[0]
				var album = OSB_split3[1]
				
				console.log('歌曲名：'+song_name)
				console.log('艺术家：'+ musician)
				console.log('专辑：'+album)
			}catch(error){
				console.log(error)
				var song_name = song
				var musician = song
				var album = song
			}finally{
				console.log("发生什么事了")
			}
		</script>
		
		
		
		<p id = song_name_text>歌曲名：null</p>
		<p id = musician_name_text>艺术家:null</p>
		<p id = album_name_text>专辑：null</p>
		</div>
		<div class=song_lrc114514>
		<p style=color:#FFA500;font-size: 18px>歌词：<p>
		<p id = song_lrc></p>
		</div>
		<script>
		
			var song_name_text1 = document.getElementById("song_name_text")
			song_name_text1.innerHTML = "歌曲名:" + song_name
			var musician_name_text1 = document.getElementById("musician_name_text")
			musician_name_text1.innerHTML = "艺术家：" + musician
			var album_name_text1 = document.getElementById("album_name_text")
			album_name_text1.innerHTML = "专辑：" + album
			
			var album_img1 = document.getElementById("album_img")
			album_img1.src= "https://80z2.fun/home/80z2_Picutre.php?name=" + album
			console.log(album_img1.src)
			
			
			song_lrc_url="https://jzsw-1304292379.cos.ap-beijing.myqcloud.com/txt/"+song+'.mp3.txt'
			console.log(song_lrc_url)
			
			
			
			
			fetch(song_lrc_url , {
				mode:'no-cors'
				})
			
				.then(response => response.text())
				.then(data => {
					var song_lrc_text666 = data;
					console.log(song_lrc_text666);
					// song_lrc_text.textContent  = data + "\n"
				
					lines = data.split("\n")
					var textContaner = document.querySelector(".song_lrc114514");
					lines.forEach(line => {
						var paragraph = document.createElement("p");
						paragraph.style = "color:#FFA500;font-size: 18px"
						paragraph.textContent = line;
						textContaner.appendChild(paragraph);
					});
				})
				.catch(error => {
					console.error('请求歌词错误：',error);
					song_lrc_text.textContent  = "找不到歌词文件"
				});
			
			
		
		</script>
		
		<script>
			/*
			var audioElement = document.getElementById("mp");
			
			
			
			
			audioElement.addEventListener("loadedmetadata", function() {
			var durationInSeconds = audioElement.duration;
			var hours = Math.floor(durationInSeconds / 3600);
			var minutes = Math.floor((durationInSeconds % 3600) / 60);
			var seconds = Math.floor(durationInSeconds % 60);
			var milliseconds = Math.floor((durationInSeconds % 1) * 1000);
    
			var formattedDuration = hours.toString().padStart(2, '0') + ":" +
                            minutes.toString().padStart(2, '0') + ":" +
                            seconds.toString().padStart(2, '0') + "." +
                            milliseconds.toString().padStart(3, '0');
			console.log(formattedDuration)
			
			
			var vttfile = "WEBVTT \n0:00:00.000 --> " + String(formattedDuration)
			console.log(vttfile)
			
			
			
			var artistTrack = document.createElement("track");
			artistTrack.kind = "metadata";
			artistTrack.label = "艺术家";
			artistTrack.src = vttfile + "\n" + "专辑:" + album;
			artistTrack.srclang = "zh-CN";
  
			var albumTrack = document.createElement("track");
			albumTrack.kind = "metadata";
			albumTrack.label = "专辑" + "\n" + "艺术家:" + musician ;
			albumTrack.src = vttfile;
			albumTrack.srclang = "zh-CN";
			
			audioElement.appendChild(artistTrack);
			audioElement.appendChild(albumTrack);
			});
			
			*/
		</script>
		
		
		</div>
	</body>
</html>